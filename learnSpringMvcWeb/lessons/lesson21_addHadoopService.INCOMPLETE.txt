Lesson:  How to Add a Hadoop Service to your Spring MVC Web App
--------------------------------------------------------------
This lesson describes how to add a Hadoop Client and
demonstrates how a Spring MVC controller could pull a file from Hadoop and return it

  
Assumptions:  
 A) You have a Spring MVC web app already setup


References
----------
http://stackoverflow.com/questions/17072543/reading-hdfs-and-local-files-in-java
http://stackoverflow.com/questions/30124206/getting-files-in-hadoop-into-a-web-application
http://www.folkstalk.com/2013/07/java-program-to-list-contents-of.html

Procedure
---------
 1. Install ZooKeeper and Hadoop
    -- The easier way to is to use the Accumulo Quick-install
       which will setup a ZooKeeper, Hadoop File System, and Accumulo Instance
       [see learnAccumulo / howToSetupAccumuloQuickInstall ]
 
 
 2. If your hadoop HDFS is running on a different box, then enable remote connections
    a. Edit hdfs-site.xml
		  <property>
		    <name>dfs.namenode.rpc-bind-host</name>
		    <value>0.0.0.0</value>
		  </property>
    
    
 
 3. Start-up your Hadoop File System
    unix> source 
    unix> qi-start
    
    -- Now, you have a running hadoop file system
          
 

    
 4. Add a file to your Hadoop File System
    a. Create a directory in the HDFS called /tmp/input
       unix> hadoop fs -mkdir -p /tmp/input
    
    b. Create a file called /home/adam/stuff.txt with this 
       unix vi /home/adam/stuff.txt
            hi mom
            hi Ben
            hi Peter
            hi Dad
            hi Will
            hi Sam
            Will is cool
    
    c. Put that file in the /tmp/input direcory in HDFS
       unix> hadoop fs -put /home/adam/stuff.txt /tmp/input/stuff.txt 
    
    
    d. Verify that it is there
       unix> hadoop fs -ls -R /tmp
			drwxr-xr-x   -  adam supergroup          0 2017-01-14 00:04 /tmp/input
			-rw-r--r--   1  adam supergroup        142 2017-01-14 00:04 /tmp/input/stuff.txt

 


 5. Add the maven dependency to your pom.xml 
    NOTE: If you are using the HDFS built-in to the Accumulo Quick-Install
          Then, you are probably running Hadoop 2.4.1
 
		<dependency>
		    <groupId>org.apache.hadoop</groupId>
		    <artifactId>hadoop-common</artifactId>
		    <version>2.4.1</version>
		</dependency>
		          
          

 5. Add this to your logback.xml
     <logger name="org.apache.hadoop" level="DEBUG" additivity="false">
         <appender-ref ref="CONSOLE"/>
     </logger>
    
              
 6 Add the Hadoop Service to your Spring MVC Web App
    
 
 
 6. Add a method to your WelcomeController class that will
    a) Get a file from Hadoop
    b) Return it back to the user
    
    