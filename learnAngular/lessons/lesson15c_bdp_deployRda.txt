Lesson:  How to Deploy the RDA to a BDP
---------------------------------------



Procedure
---------
 1. Setup socks tunnel in putty
    a. Startup putty
	   Session Name: Socks Tunnel
	   Host Name:    <IP address of the puppet master>
	   Port:         22
	
	b. Click on Connection -> SSH 
	   Check "Don't start a shell or command at all"
	   
	c. Click on Connection -> SSH -> Tunnels
	   Source port:  5000     (or any port open on your local box
	   Destination:  <leave it empty>
	   Select Dynamic
	   Select Auto
	   Press "Add"
	   -- You sohuld see D5000
	
	d. Click on Session
	   Press "Save"
	   
 
 2. Setup an RDA tunnel in putty
    a. Startup putty
	   Session Name: RDA Deployer Tunnel
	   Host Name:    <IP address of the puppet master>
	   Port:         22
	
	b. Click on Connection -> SSH 
	   Check "Don't start a shell or command at all"
	   
	c. Click on Connection -> SSH -> Tunnels
	   Source port:  9998     (or any port open on your local box
	   Destination:  <ip address of rda deployer server>:9998
	   Select Local
	   Select Auto
	   Press "Add"
	   -- You sohuld see L9998 <ip address of rda deployer server:9998
	
	d. Click on Session
	   Press "Save"
    
 
 3. Connect to RDA tunnel
    a. Open putty
	b. Double-click on "RDA Deployer Tunnel"
       -- Enter a unix account username
	   -- Enter a unix account password


 4. **FIRST TIME ONLY**  Initialize the database
    ssh to the puppet master
	unix> go postgres_server
	unix> sudo -s
	unix> psql -Upostgres -hlocalhost
	unix> psql 

		create database app1_db;
		create user app1_user with password 'secret';
		grant all privileges on database app1_db to app1_user;
		alter database app1_db     SET search_path=app1_db;
		alter role     app1_user   SET search_path=app1_db;
		\q


 5. Build the RDA
    unix> cd ~/intellijProjects/angularApp1
	unix> mvn clean package -PbuildRda -Pprod
	-- This will create the RDA deployer zip file
	-- Located here:  ~/intellijProjects/angularApp1/bdp-install/target/webapp.rda.zip
	
	
 6. Deploy RDA
	a. Open a browser
	b. Connect to https://localhost:9998/deployer
       -- You should see the RDA Deployer web page
	   -- Press Upload RDA
	   -- Browse to your webapp.rda.zip file
	c. Click on the RDA -> Deploy
	
	d. Start the RDA
	
	e. Use the Socks Tunnel to look at log file
	
 
 
 7. Connect to your webapp
    https://<ip address of proxy server>/app1
	-- You will be prompted for your bdp client.12 name
	
	
 
