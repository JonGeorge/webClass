Lesson:  Add a Lookup Service
-----------------------------
Problem: We have lots of dropdowns that need lookup values
Solution: Create a LookupService


Procedure
---------
 1. Add a Lookup class
    a. Right-click on frontend/src/app -> new Directory
       Name:  models

    b. Right-click on frontend/src/app/modesl -> new File
       Filename: lookupDTO.ts

    c. Copy this to your lookupDTO.ts

         /*
          * Define the LookupDTO class
          */
         export class LookupDTO {
           id: number;
           name: string;

           constructor(aId: number, aName: string) {
             this.id = aId;
             this.name = aName;
           }
         }



 2. Add a hard-coded list of priorities to add-report.component.ts
    a. Edit frontend/src/app/reports/add-report/add-report/component.ts

    b. Add this to the top of add-report.component.ts
          public priorities: LookupDTO[] =
            [
              {
                id: 1,
                name: 'Low'
              },
              {
                id: 2,
                name: 'Medium'
              },
              {
                id: 3,
                name: 'High'
              },
              {
                id: 4,
                name: 'Critical'
              }
            ];


 3. Change the add-report.component.html to loop through the list of priorities
    -- The value holds the "id" field
    -- The displayed label holds the "name" field

    a. Change this dropdow
          <mat-select name="report.priority" [(ngModel)]="report.priority">
            <mat-option value="0">-Select Priority-</mat-option>
            <mat-option value="1">Low</mat-option>
            <mat-option value="2">Medium</mat-option>
            <mat-option value="3">High</mat-option>
            <mat-option value="4">Critical</mat-option>
          </mat-select>

       To this:
          <mat-select name="report.priority" [(ngModel)]="report.priority">
            <mat-option mat-value="undefined">-Select Priority-</mat-option>
            <mat-option *ngFor="let priority of priorities"  value="{{priority.id}}">{{priority.name}}</mat-option>
          </mat-select>


 4. Verify the priorities dropdown shows the 4 values
    a. Run the backend and frontend using the debugger
       Pull Debug / "Debug Webapp"
       This should open a browser connected to http://localhost:4200
    b. Go to the "Add a Report" page
    c. Verify that selecting a priority changes the value




 5. Generate the Lookup Service
    unix> cd ~/intellijProjects/angularApp1
    unix> ng generate service services/lookup
          -- Creates src/app/services/lookup.service.ts
          -- Creates src/app/services/lookup.service.spec.ts


 6. Replace the lookup.service.ts with this:

         import { Injectable } from '@angular/core';


         @Injectable({
           providedIn: 'root'
         })
         export class LookupService {

           constructor() { }

           /*
            * Return a list of LookupDTO objects that correspond to the passed-in type name -- e.g, 'priority'
            */
           public getLookupWithType(aType: string)  {

             // Return a hard-coded array of LookupDTO objects
             let listOfDtos: Array<LookupDTO> = [
                 new LookupDTO(1, 'low'),
                 new LookupDTO(2, 'medium'),
                 new LookupDTO(3, 'high'),
                 new LookupDTO(3, 'critical')
               ];

             return listOfDtos;
           }

         }


 5. Edit the form1.component.ts to use the LookupService
    a. Inject Change the constructor so it is injected
          constructor(private lookupService: LookupService) { }

    b. Remove the hard-coded list of priorities
          public priorities: any =
                 [
                   {
                     id: 1,
                     name: 'Low'
                   },
                   {
                     id: 2,
                     name: 'Medium'
                   },
                   {
                     id: 3,
                     name: 'High'
                   },
                   {
                     id: 4,
                     name: 'Critical'
                   }];

    c. Insert a variable called priorities
          public priorities: Array<LookupDTO>;

    d. Change the ngOnInit() to load the list of priorities
          ngOnInit() {
            this.report = new Report();
            this.report.name = null;
            this.report.source = null;
            this.report.priority = null;

            // Use the LookupService to get all of the priorities
            this.priorities = this.lookupService.getLookupWithType('priority')
          }

 6. Try it out and see if it works
    a. Pull Run / Run 'Angular CLI Server'
    b. Pull Run / Debug 'Angular Application'
