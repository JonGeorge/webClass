Lesson:  Add Form Validation to the "Add Reports" page (using templates)
------------------------------------------------------------------------
Problem:  I don't want users to press the "Save" button on the "Add Reports" page
          until all required fields are provided
          
Solution: On the frontend, Use Form Validation  
          On the backend, use Java DTO validation
          

Part 1: Add frontend form validation to "Add Reports"
-----------------------------------------------------
 1. Add the required fields to the add-report.component.html
    a. Add the form tag WITHIN the mat-card-content tags
       NOTE:  We add a reference variable called "form" that points to this form
       
        <mat-card-content>
           <form #form="ngForm" novalidate="true">

           ...
           
           </form>
        </mat-card-content>


    b. Make the report name textbox a *required* field
       NOTE:  Add #name="ngModel" to create a reference to this text box
              Add required (so that the front-end knows that it's a required field)
       
          <input matInput type="text" name="report.name"  [(ngModel)]="report.name" REQUIRED #name="ngModel"/>

          <mat-error>
            <!-- This mat-error tag is displayed if this form field is invalid AND touched -->
            Report Name is required
          </mat-error>
          
          
    c. Make the priority dropdown a *required* field
       NOTE:  Add #priority="ngModel" to create a refernence to this dropdown
              Add required (so that the front-end knows that it's a required field)
           
          <mat-select name="report.priority" [(ngModel)]="report.priority" REQUIRED #priority="ngModel">
           
    
    d. Change the reset button so click events call reset(form) 
          <button type="button" (click)="reset(form)" style="margin-top: 20px" mat-raised-button>
             
          
    e. Change the save button so click events call save(form) 
          <button type="button" (click)="save(form)" mat-raised-button color="primary">
          
          
 2. Change the add-report.component.ts so that the form object is passed-in on the reset() and save() methods
    a. Change the reset() method so that the form object is passed-in
        public reset(aForm:  NgForm): void {
            // Reset the form back to pristine/untouched condition
            aForm.resetForm();
         }
  
  
    b. Change the save() method so that the form object is psased-in
        public save(aForm: NgForm): void {
            if (aForm.valid) {
                // Invoke a service to save the record
                console.log("Save record.");

                // Reset the form
                aForm.reset();
            }
        }


 3. Change the component and HTML so that the Report Model fields can be null
    a. Change the Report model to allow for null fields
           export class Report {
              name: string | null;
              priority: number | null;
              source: number | null;
              authors: string | null
            }    
    
    b. Change the AddReportComponent.ngOnInit() so that unset values are null
          ngOnInit(): void {
            // Initialize the report object
            this.report = new Report();
            this.report.name = null;
            this.report.priority = null;
            this.report.source = null;
            this.report.authors = null;
          } 
      
     
     c. Change the priority dropdown so that null is the default value
            <mat-select required name="report.priority" [(ngModel)]="report.priority" #priority="ngModel">
                <mat-option [value]=null>-Select Priority-</mat-option>
                <mat-option [value]=1>Low</mat-option>
                <mat-option [value]=2>Medium</mat-option>
                <mat-option [value]=3>High</mat-option>
                <mat-option [value]=4>Critical</mat-option>
            </mat-select>
        
     d. Change the Report source dropdown so that null is the default value
            <select matNativeControl name="report.source" [(ngModel)]="report.source">
                <option [value]=null>-Select Source-</option>
                <option [value]=100>Israel</option>
                <option [value]=101>United Kingdom</option>
                <option [value]=102>USA</option>
            </select>     
            
            
4. Activate the debugger to see if form field validation shows when a field is touched and left empty
    a. Pull Run -> Debug 'Full WebApp'
    b. Click on "Add Report"
    c. Type-in a name in the report-name and then clear it out (so it's touched and empty)
       -- You should see the "Name is required"  
    
    Problem:  If you press "Reset" and "Save", the user does not see the error messages
              (because the form fields were not touched)
  

5. Change the save() button method so that pressing "Reset" and "Save" causes the errors to appear on the page
   a. Edit the add-report.component.ts
   b. Change the save() method so that it has this line init:
       // Make all form fields as touched -- so that error validation displays
       aForm.form.markAllAsTouched();
   
   When completed, the save() method should look like this:
        public save(aForm: NgForm): void {
            // Make all form fields as touched -- so that error validation displays
            aForm.form.markAllAsTouched();

            if (aForm.valid) {
                // Invoke a service to save the record
                console.log("Save record.");

                // Reset the form
                aForm.reset();
            }
        }
        
            
6. Activate the debugger to see if pressing "Reset" and "Save" shows the errors
    a. Pull Run -> Debug 'Full WebApp'
    b. Click on "Add Report"
    c. Press "Reset" and then "Save"
       -- You should see the errors
       
    
7. Disable the "Save" button as long as there are warnings
   -- We let users press the "Save" button the *first* time
   -- But, it's stays disabled until all validation errors are cleared
   
   a. Add a boolean flag to the add-report.component.ts
        formSubmitted: boolean = false;

   b. Change the save() method to reset the formSubmitted flag (when a user presses "Save"
        public save(aForm: NgForm): void {
            this.formSubmitted = true;

            // Make all form fields as touched -- so that error validation displays
            aForm.form.markAllAsTouched();

            if (aForm.valid) {
              // Invoke a service to save the record
              console.log("Save record.");

              // Reset the form
              aForm.reset();
              this.formSubmitted = false;
            }
         }
  
  
   c. Adjust the "Save" button so it's disabled if the user has submitted the form once and there are warnings
          [disabled]="formSubmitted && form.invalid"
          
      So, the "Save" button looks like this:
         <button type="button" (click)="save(form)" mat-raised-button color="primary" [disabled]="formSubmitted && form.invalid">
         
  
   d. Change the reset() method to reset the flag
          public reset(aForm:  NgForm): void {
            // Reset the form back to pristine/untouched condition
            this.formSubmitted = false;
            aForm.resetForm();
          }   


8. Activate the debugger to see if the "Save" button is disabled
    a. Pull Run -> Debug 'Full WebApp'
    b. Click on "Add Report"
    c. Press Save
       -- You should see the warnings
       -- Now, the "Save" button is disabled (until all form errors are resolved)
    d. Fill-in a report name
    e. Select a priority
       -- Now, the "Save" button is enabled
       
     
