Lesson #4:  How to add a timer to a page (using Angular directive)
------------------------------------------------------------------

Assumptions:  
 A) You have IntelliJ installed
 B) You have Maven installed
 
 
References
----------
https://siddii.github.io/angular-timer/


Procedures
----------
 1. Create a SpringMvcAngular Web App
    Follow the steps in howToCreateSpringMvcWebApp_usingIntellijMaven_cargoPlugin.txt
    NOTE:  Call the project:   springMvcAngular
    

    
 2. Add the timer js to your webapp
    a. Download the timer file:
       1) Go to https://raw.github.com/siddii/angular-timer/master/dist/angular-timer.min.js
       2) Get the version number
          Look at the header to determine the version
          
          As of this writing, the header shows this:
			/**
			 * angular-timer - v1.3.3 - 2015-11-30 10:57 AM
			 * https://github.com/siddii/angular-timer
			 *
			 * Copyright (c) 2015 Siddique Hameed
			 * Licensed MIT <https://github.com/siddii/angular-timer/blob/master/LICENSE.txt>
			 */
          So, you know that this is version 1.3.3
          
       3) Pull File / Save Page as 
       4) Save the file to your c:\vault
       
       
    b. Install the timer javascript
       1) Right-click on /src/main/webapp/resources/ -> New Directory
          Directory Name:  timer-1.3.3
          
       2) Copy the c:\vault\angular-timer.min.js to your /src/main/webapp/resources/timer-1.3.3/ directory
    
   
    c. Download momentJS and locales.js
       1) Go to http://momentjs.com/downloads/moment-with-locales.min.js
       2) Pull File / Save Page As
          Save it to your c:\vault
          -- Now, you have c:\vault\moment-with-locales.min.js
       
    d. Download HumanizeDuration
       1) Go to https://github.com/EvanHahn/HumanizeDuration.js
       2) Click "Download Zip"
       3) Save HumanizeDuration.js-master.zip to your c:\vault
       4) Right-click on c:\vault\HumanizeDuration.js-master.zip -> 7zip -> Extract Here
          Now, you should have C:\vault\HumanizeDuration.js-master\
       
       5) Install HumanizeDuration
          a) Right-click on C:\vault\HumanizeDuration.js-master\humanize-duration.js -> Copy
          b) Right-click on your /src/main/webapp/resources -> New Directory
             DirectoryName: humanize-duration
          c) Right-click on your /src/main/webapp/resources/humanize-duration/ -> Paste
          
       
   With Bower install :

    Install humanize-duration using Bower - bower install humanize-duration
    Install momentjs using Bower - bower install momentjs

And include these scripts in your webpage :

    bower_components/momentjs/min/moment.min.js
    bower_components/momentjs/min/locales.min.js
    bower_components/humanize-duration/humanize-duration.js
   
   
   
   
   
 
 3. Add a generic controller to your WelcomeController
 
     /**********************************************************************
     * showExamplePage()
     ***********************************************************************/
    @RequestMapping("/example/{aViewName}")
    public ModelAndView showExamplePage(@PathVariable String aViewName, Model aModel )
    {
        // Create a modelAndView object
        String sViewName = aViewName + ".jsp";
        ModelAndView mav = new ModelAndView(sViewName);

        // Create a userInfo object
        UserInfo userInfo = new UserInfo();
        userInfo.setUserName("Adam");
        userInfo.setIsAdministrator(true);

        // Add the userInfo information to the view
        mav.addObject("userInfo", userInfo);

        return mav;
    }
    
 
 
 4. Add this link to your welcome.jsp page
  
     <a href="${contextPath}/example/angular4">Angular example #4 - page with a timer</a> <br/>
    
 
 
 5. Create this file:  angular4.jsp
    a. Right-click on /src/main/webapp/WEB-INF/jsp -> New File
       Filename:  angular4.jsp
        
    b. Copy this to your file:
		     
		<%@ include file="/WEB-INF/jsp/stdJspIncludes.jsp" %>
		<!DOCTYPE HTML>
		
		<html lang="en" data-ng-app="myApp">
		
		<head>
		    <title>Angular #4</title>
		
		    <%-- Load select2 CSS --%>
		    <link href="${contextPath}/resources/select2-3.5.4/select2.css" rel="stylesheet">
		
		</head>
		
		<body data-ng-controller="PhoneListCtrl as ctrl">
		
		<%-- S T A N D A R D       H E A D E R  --%>
		<%@ include file="/WEB-INF/jsp/stdHeader.jsp" %>
		
		<h2>angular4.jsp</h2>
		
		
		<br/>
		
		updated with data tags<br/>
		<timer interval="1000" countdown="100">{{countdown}}</timer>
		<br/>
		
		<%-- Define a Select2 dropdown --%>
		<select select2
		        initialization-json="{allowClear:true, placeholder:'-All Phones-'}"  style="width: 300px"
		        data-ng-model="ctrl.selectedPhone"
		        data-ng-change="ctrl.userSelectedPhone()">
		
		    <%-- select2 replaces this blank option with a place holder so keep it --%>
		    <option></option>
		
		    <option value="">-All Phones-</option>
		
		    <%-- Fill-in the dropdown the values found in search.phones --%>
		    <option data-ng-repeat="option in ctrl.phones" value="{{option.name}}">{{option.name}}</option>
		</select>
		
		
		
		
		<%-- S T A N D A R D       F O O T E R  --%>
		<%@ include file="/WEB-INF/jsp/stdFooter.jsp" %>
		
		<%-- Load jQuery --%>
		<script src="${contextPath}/resources/jquery-1.11.3/jquery-1.11.3.min.js"></script>
		
		<%-- Load select2 JS --%>
		<script src="${contextPath}/resources/select2-3.5.4/select2.min.js"></script>
		
		<%-- Load Angular --%>
		<script src="${contextPath}/resources/angular-1.3.16/angular.min.js" type="text/javascript"></script>
		
		
		<%-- Load Timer dependencies (momentJs and humanize-duration --%>
		<script src="${contextPath}/resources/momentjs/moment-with-locales.min.js" type="text/javascript"></script>
		<script src="${contextPath}/resources/humanize-duration/humanize-duration.js" type="text/javascript"></script>
		
		<%-- Load Timer --%>
		<script src="${contextPath}/resources/timer-1.3.3/angular-timer.min.js" type="text/javascript"></script>
		
		
		<script type="text/javascript">
		    var myApp = angular.module('myApp', []);
		
		    myApp.controller('PhoneListCtrl', [ function ()
		    {
		        var self = this;
		
		
		        self.phones = [
		            {'name': 'Nexus S', 'snippet': 'Fast just got faster with Nexus S.'},
		            {'name': 'Nexus T', 'snippet': 'Nexus newest model.'},
		            {'name': 'Motorola XOOM� with Wi-Fi', 'snippet': 'The Next, Next Generation tablet.'},
		            {'name': 'MOTOROLA XOOM�', 'snippet': 'The Next, Next Generation tablet.'}
		        ];
		
		        self.userSelectedPhone = function()
		        {
		            console.log('userSelectedPhone() called.  self.selectedPhone=', self.selectedPhone);
		        };
		
		    }]);
		
		    myApp.directive('select2', function()
		    {
		        return{
		            restrict: 'A',
		            scope:
		            {
		                initializationJson: '=initializationJson'
		            },
		            link: function(scope, element, attrs)
		            {
		                // Make sure InitializationJson is atleast an empty json block
		                scope.initializationJson = scope.initializationJson || {};
		
		                // Apply the json to this select2 dropdown
		                $(element).select2(scope.initializationJson);
		            }
		        }
		    });
		</script>
		</body>
		</html>
