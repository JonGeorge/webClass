Lesson:  Add the "Report Audit History" Page
--------------------------------------------


Procedure
---------
 1. Add the audit page
    a. Right-click on webapp/src/main/resources/public/resources/features/reports -> New Directory
       Directory Name:  audit
    
    b. Right-click on audit -> new File:  index.html
    c. Right-click on audit -> New File:  main.controller.js
    d. Copy this to the index.html
       
            <div class="feature">

                <header layout="row" layout-align="space-between center">
                    <!-- Page Title -->
                    <div class="md-headline"><i class="fas fa-history"></i> Audit History</div>
                </header>

                <!-- Progress bar -->
                <div class="progressBarWrapper">
                    <md-progress-linear ng-show="auditReportVM.dataIsLoading" md-mode="indeterminate"></md-progress-linear>
                </div>

                <pre>
                   navVM.from={{ navVM.from | json}}
                   navVM.to={{ navVM.to | json}}
                </pre>

            </div>




    e. Copy this to the main.controller.js

            (function(){
                angular.module('app.features')
                    .controller('auditReport', ['$timeout', '$stateParams', '$scope', '$window', Callback])

                function Callback($timeout, $stateParams, $scope, $window) {
                    console.log('auditReport controller started.');

                    let auditReportVM = this;

                    window.document.title = "Audit Report | APP1";

                    auditReportVM.$onInit = function() {
                        console.log('auditReportVM onInit() started.');
                        console.log('auditReportVM onInit() finished.');
                    };

                    console.log('auditReportVM controller finished.');
                }
            })();

    f. Add the audit main.controller.js to the app.html
          <script src="./resources/features/reports/audit/main.controller.js"></script>
          
          
       When completed, the top of the app.html should look like this:

            <!DOCTYPE html>
            <html lang="en" data-ng-app="app1">
            <head>
                <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
                <meta http-equiv="X-UA-Compatible" content="IE=edge">

                <title>App Main Page</title>

                <base href="/app1/">

                <!-- Include CSS Files -->
                <link rel="stylesheet" type="text/css" href="./resources/node_modules/angular-resizable/angular-resizable.min.css">
                <link rel="stylesheet" type="text/css" href="./resources/node_modules/angular-material/angular-material.min.css">
                <link rel="stylesheet" type="text/css" href="./resources/node_modules/@fortawesome/fontawesome-free/css/all.css">
                <link rel="stylesheet" type="text/css" href="./resources/css/index.css">

                <!-- Load All Node Modules JavaScript Dependencies -->
                <script src="./resources/node_modules/angular/angular.js"></script>
                <script src="./resources/node_modules/@uirouter/angularjs/release/angular-ui-router.min.js"></script>
                <script src="./resources/node_modules/angular-aria/angular-aria.min.js"></script>
                <script src="./resources/node_modules/angular-animate/angular-animate.min.js"></script>
                <script src="./resources/node_modules/angular-material/angular-material.min.js"></script>
                <script src="./resources/node_modules/angular-messages/angular-messages.min.js"></script>
                <script src="./resources/node_modules/angular-sanitize/angular-sanitize.min.js"></script>
                <script src="./resources/node_modules/angular-scroll/angular-scroll.min.js"></script>
                <script src="./resources/node_modules/angular-resizable/angular-resizable.min.js"></script>
                <script src="./resources/node_modules/@fortawesome/fontawesome-free/js/all.js"></script>

                <!-- Load all custom JavaScript Files -->
                <script src="./resources/config/app.js"></script>
                <script src="./resources/config/routes.js"></script>
                <script src="./resources/config/state.js"></script>
                <script src="./resources/config/nav.controller.js"></script>

                <!-- Load all JavaScript files for the various features -->
                <script src="./resources/filters/megaNumbers.js"></script>
                <script src="./resources/modules/features.js"></script>
                <script src="./resources/features/reports/view_reports/main.controller.js"></script>
                <script src="./resources/features/reports/add_report/main.controller.js"></script>
                <script src="./resources/features/reports/audit/main.controller.js"></script>
                <script src="./resources/features/welcome/main.controller.js"></script>
            </head>
            
            
 2. Add Audit History to the navigation bar
    a. Edit the app.html
    
    b. Add this to the <md-menu>...</md-menu>
         <md-menu-item >
            <md-button data-ui-sref-active="active" title="Add Report" ui-sref="auditReport"><md-icon class="fa fa-history"></md-icon> Audit History</md-button>
         </md-menu-item>
         
    c. Add this to the <div class='nav'>...</div>
         <div layout="row" layout-align="space-between-center">
            <a data-ui-sref-active="active" title="Add Report" ui-sref="auditReport">Audit History</a>
            <span data-ng-click="navVM.openItemNewWindow('auditReport')">
                          <i class="fas fa-external-link-alt" style="color: #999;" title="Open Audit History in a new window"></i>
                      </span>
        </div>
 
 
 3. Add Audit History to the routes.js
    a. Edit the routes.js
    
    b. Add this method
        function getAuditHistoryState() {
            return {
                uurl: URL_PAGE_PREFIX + '/reports/audit',
                templateUrl: './resources/features/reports/audit/index.html',
                controller: 'auditReport',
                controllerAs: 'auditReportVM',
                resolve:{

                }
            }
        }    
        
    c. Change the $stateProvider so it looks like this:
          $stateProvider
            .state('viewReports', getViewReportState())
            .state('addReport',   getAddReportState())
            .state('welcome', getWelcomeState())             // The getWelcomeState() method is mapped to / so it's the DEFAULT route
            .state('auditReport', getAuditHistoryState())


 4. Verify it works:
    a. Activate your webapp with the debugger
    b. Open a browser
    c. Connect to http://localhost:8080/app1
    d. Click on Reports -> Audit History
       -- It should open the page
       
   
