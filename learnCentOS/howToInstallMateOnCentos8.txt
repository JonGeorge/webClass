How to Install Mate on Centos 8
-------------------------------
Problem:  There are no dnf/yum packages for the Mate Window Manager for Centos 8
Solution: Compile it and install from source

References
----------
https://tylersguides.com/guides/install-mate-on-centos-8/


Procedure
---------
 1. Enable the powertools repository
    unix> sudo dnf config-manager --enable PowerTools
	
 2. Install dependencies
    unix> sudo dnf install accountsservice accountsservice-devel accountsservice-libs alsa-lib-devel apr-devel avahi avahi-devel boost-devel bzip2 dconf dconf-devel desktop-file-utils enchant enchant-devel exempi exempi-devel gcc gcc-c++ gcr gcr-devel gdk-pixbuf2 gdk-pixbuf2-devel gdm gnome-common gnome-menus gobject-introspection-devel gtk3 gtk3-devel gtk-doc gtkmm30 gtkmm30-devel gtksourceview3 gtksourceview3-devel gvfs httpd httpd-devel inkscape intltool iso-codes iso-codes-devel itstool iw json-glib json-glib-devel kernel-tools-libs-devel lcms2-devel libappindicator-gtk3 libappindicator-gtk3 libappindicator-gtk3-devel libcanberra-devel libcanberra-gtk3 libcap-ng-devel libexif libexif-devel libgcrypt-devel libgtop2 libgtop2-devel libgxps libgxps-devel libICE libICE-devel libindicator-gtk3-devel libjpeg-turbo-devel libnl3-devel libnotify libnotify-devel libpeas libpeas-devel librsvg2 librsvg2-devel libsecret libsecret-devel libselinux-devel libSM libSM-devel libsoup libsoup-devel libspectre libspectre-devel libtiff libtiff-devel libwnck3 libwnck3-devel libX11 libX11-devel libxklavier libxklavier-devel libxml2 libxml2-devel libXScrnSaver libXScrnSaver-devel libXtst libXtst-devel lynx make mesa-dri-drivers network-manager-applet nm-connection-editor nss-devel pam-devel perl-Env perl-XML-Simple polkit polkit-devel poppler-glib poppler-glib-devel pulseaudio-libs pulseaudio-libs-devel pygobject3-devel python2 python2-devel python36 python36-devel python3-docutils python3-gobject redhat-menus redhat-rpm-config samba startup-notification startup-notification-devel systemd-devel tar texlive-kpathsea texlive-lib-devel upower upower-devel vala vte291 vte291-devel webkit2gtk3 webkit2gtk3-devel wget xmlto xorg-x11-server-Xorg xorg-x11-util-macros xorg-x11-xinit xorg-x11-xtrans-devel yelp zenity
	


 3. Prepare a working area
    unix> sudo -s
	unix> cd /root
    unix> mkdir mate-src mate-build mate-installed

 4. The PKG_CONFIG_PATH variable is used by the pkg-config program to locate .pc files in non-standard locations. pkg-config is used heavily by the source configuration scripts to determine where to find header files, executables, and shared library files the application depends on. This information comes from the .pc files.
    a. create the mate-build-env file
	   unix> vi /root/mate-build-env

		export PKG_CONFIG_PATH=/usr/local/lib/pkgconfig
		export PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/local/share/pkgconfig
	
	b. Source the file
	   unix> source /root/mate-build-env
	   
 5. Download Sources
    a. Create a textfile that holds all of the files to download
	   unix>  vi /root/mate-source-file
	   
atril-1.22.3.tar.xz
caja-1.22.3.tar.xz
caja-dropbox-1.22.1.tar.xz
caja-extensions-1.22.1.tar.xz
engrampa-1.22.2.tar.xz
eom-1.22.2.tar.xz
libmatekbd-1.22.0.tar.xz
libmatemixer-1.22.0.tar.xz
libmateweather-1.22.1.tar.xz
marco-1.22.4.tar.xz
mate-applets-1.22.2.tar.xz
mate-backgrounds-1.22.0.tar.xz
mate-calc-1.22.2.tar.xz
mate-common-1.22.2.tar.xz
mate-control-center-1.22.2.tar.xz
mate-desktop-1.22.2.tar.xz
mate-icon-theme-1.22.2.tar.xz
mate-indicator-applet-1.22.1.tar.xz
mate-media-1.22.2.tar.xz
mate-menus-1.22.1.tar.xz
mate-netbook-1.22.2.tar.xz
mate-notification-daemon-1.22.1.tar.xz
mate-panel-1.22.2.tar.xz
mate-polkit-1.22.0.tar.xz
mate-power-manager-1.22.2.tar.xz
mate-screensaver-1.22.2.tar.xz
mate-sensors-applet-1.22.1.tar.xz
mate-session-manager-1.22.3.tar.xz
mate-settings-daemon-1.22.1.tar.xz
mate-system-monitor-1.22.2.tar.xz
mate-terminal-1.22.1.tar.xz
mate-user-guide-1.22.3.tar.xz
mate-user-share-1.22.1.tar.xz
mate-utils-1.22.2.tar.xz
mozo-1.22.2.tar.xz
pluma-1.22.2.tar.xz
python-caja-1.22.1.tar.xz

 6. Use the file to download all of the source files
    unix> cd /root/mate-src; for file in $(cat /root/mate-source-file);  do wget https://pub.mate-desktop.org/releases/1.22/${file}; done
	
 7. Download additional dependencies
    unix> cd /root/mate-src
    unix> wget https://downloads.sourceforge.net/djvu/djvulibre-3.5.27.tar.gz 
	unix> wget http://tango.freedesktop.org/releases/icon-naming-utils-0.8.90.tar.bz2
	unix> wget https://github.com/threatstack/libmagic/archive/5.18.tar.gz
	unix> wget https://github.com/GNOME/libgnome-keyring/archive/3.12.0.tar.gz
	unix> wget http://git.yoctoproject.org/cgit.cgi/libfakekey/snapshot/libfakekey-0.3.tar.bz2
	unix> wget https://github.com/HewlettPackard/wireless-tools/archive/v29.tar.gz
	unix> wget http://ftp.gnome.org/pub/GNOME/sources/gucharmap/8.0/gucharmap-8.0.1.tar.xz
	unix> wget https://gitlab.freedesktop.org/xorg/lib/libxpresent/-/archive/master/libxpresent-master.tar.bz2
	unix> wget https://github.com/AyatanaIndicators/libayatana-indicator/archive/0.6.3.tar.gz
	unix> wget https://github.com/AyatanaIndicators/ayatana-ido/archive/0.4.90.tar.gz
 
 8. unpack the source archive files into your build directory:
    unix> cd ~/mate-build; for file in ~/mate-src/* ; do tar xf $file; done
	
 9. Install dependencies
    unix> cd ~/mate-build
	unix> cd djvulibre-3.5.27
    unix> ./configure
    unix> make
    unix> make install
    unix> cd ..
    unix> mv djvulibre-3.5.27 ../mate-installed

    unix> cd libmagic-5.18
    unix> ./configure
    unix> make
    unix> make install
    unix> cd ..
    unix> mv libmagic-5.18 ../mate-installed
	
    unix> cd icon-naming-utils-0.8.90
    unix> ./configure
    unix> make
    unix> make install
    unix> cd ..
    unix> mv icon-naming-utils-0.8.90 ../mate-installed
	
    unix> cd libxpresent-master
    unix> ./autogen.sh
    unix> make
    unix> make install
    unix> cd ..
    unix> mv libxpresent-master ../mate-installed
	
    unix> cd wireless-tools-29
    unix> cd wireless_tools
    unix> make
    unix> make install
    unix> cd ../..
    unix> mv wireless-tools-29 ../mate-installed	
	
    unix> cd gucharmap-8.0.1
    unix> ./configure
    unix> make
    unix> make install
    unix> cd ..
    unix> mv gucharmap-8.0.1 ../mate-installed
	
    unix> cd libgnome-keyring-3.12.0
    unix> ./autogen.sh
    unix> make
    unix> make install
    unix> cd ..
    unix> mv libgnome-keyring-3.12.0 ../mate-installed
	
    unix> cd libfakekey-0.3
    unix> ./autogen.sh
    unix> make
    unix> make install
    unix> cd ..
    unix> mv libfakekey-0.3 ../mate-installed
	
	
10. Install MATE
    a. Install in this order:
	mate-common-1.22.2
mate-desktop-1.22.2
mate-calc-1.22.2
mate-backgrounds-1.22.0
marco-1.22.4
libmatekbd-1.22.0
libmatemixer-1.22.0 --enable-oss
libmateweather-1.22.1 --enable-locations-compression
eom-1.22.2
mate-menus-1.22.1
mate-terminal-1.22.1
mozo-1.22.2
mate-polkit-1.22.0
mate-user-guide-1.22.3
mate-icon-theme-1.22.2
pluma-1.22.2
mate-panel-1.22.2
mate-media-1.22.2
mate-utils-1.22.2
caja-1.22.3
caja-extensions-1.22.1
engrampa-1.22.2 --enable-magic --enable-run-in-place
mate-applets-1.22.2
atril-1.22.3 --enable-pixbuf --enable-introspection
python-caja-1.22.1
mate-notification-daemon-1.22.1
mate-session-manager-1.22.3
caja-dropbox-1.22.1
mate-sensors-applet-1.22.1
mate-settings-daemon-1.22.1 --enable-pulse
mate-control-center-1.22.2
mate-system-monitor-1.22.2 --enable-systemd
mate-power-manager-1.22.2
mate-screensaver-1.22.2
mate-netbook-1.22.2
mate-user-share-1.22.1

./configure
make
make install
cd ..
mv (dir name) ../mate-installed


11. Compile last stuff

    a. Add to path: /usr/local/bin/
       unix> export PATH=${PATH}:/usr/local/bin

    b. Compile the last packages
	   unix> cd ayatana-ido-0.4.90
	   unix> ./autogen.sh
	   unix> make
	   unix> make install
	   unix> cd ..
	   unix> mv ayatana-ido-0.4.90 ../mate-installed

	   unix> cd libayatana-indicator-0.6.3
	   unix> ./autogen.sh
	   unix> make
	   unix> make install
	   unix> cd ..
	   unix> mv libayatana-indicator-0.6.3 ../mate-installed

	   unix> cd mate-indicator-applet-1.22.1
	   unix> ./configure --with-ayatana-indicators
	   unix> make 
	   unix> make install
	   unix> cd ..
	   unix> mv mate-indicator-applet-1.22.1 ../mate-installed


12. Configure MATE
    Before using MATE, there are some things you need to do first to integrate it with CentOS 8.

    First, there are some files that were installed to /usr/local that MATE will look for in other places. The commands below will create symbolic links that allow MATE to find them.


    unix> for f in /usr/local/share/polkit-1/actions/*; do ln -s $f /usr/share/polkit-1/actions/$(basename $f); done
    unix> for f in /usr/local/etc/xdg/menus/*; do ln -s $f /etc/xdg/menus/$(basename $f); done 
	
	
	Te GDM display manager uses the gdm-password file for its PAM configuration. Without a PAM configuration file, the MATE screenlock will not work. E.g. you won’t be able to unlock the screen lock if you don’t do this. This is because MATE screenlock uses PAM to authenticate you. If you aren’t familiar with PAM, it allows users to configure how users are authenticated when they attempt to login. PAM uses configuration files to determine the methods used to do so.

    unix> cd /etc/pam.d
    unix> ln -s gdm-password mate-screensaver
	
	
Finally, create a symbolic link to the desktop session file so GDM can find MATE:
unix> cd /usr/share/xsessions
unix> ln -s /usr/local/share/xsessions/mate.desktop mate.desktop


13. Test MATE
    If GDM wasn’t already installed and enabled, enable it now.
    unix> systemctl set-default graphical.target
    unix> systemctl enable gdm.service
	
	Restart GDM to ensure it can see MATE. If it isn’t already running, using restart instead of start won’t hurt anything. When testing this guide, sometimes GDM wouldn’t finish starting, leaving me with a blank screen. Everything worked fine after a reboot. A web search led me to a few bug reports that matched the symptoms I encountered, so I am assuming it is a bug with GDM.
    unix> systemctl restart gdm.service


14. Install Mate Themes
    a. Clone the themes
	   unix> cd
	   unix> git clone https://github.com/mate-desktop/mate-themes.git
       unix> cd mate-themes
	   unix> cd desktop-themes
	   unix> mkdir ~/.themes
	   unix> cp -r * ~/.themes
	   
	   ** NOTE:  I am not sure if this is necessary
	   unix> cd mate-themes
	   unix> ./autogen.sh
	   unix> make
	   unix> sudo make install
	   
	   
    b. Restart the Window Manager
	   unix> systemctl restart gdm.service
       *or*
	   Logout
	   
	c. In the MATE Menu
	   Pull System -> Preferences -> Look and Feel --> Appearance
	   Press Customize
	   -- You should see your favorite thtmes
	   
