How to Install PostgreSQL on CentOS 6
-------------------------------------
Although CentOS contains postgres packages within its default repositories, 
we will use the packages available from the postgres project itself.
This ensures that we have access to the latest version of the software without having to install from source.


References
----------
https://www.digitalocean.com/community/tutorials/how-to-install-and-use-postgresql-on-centos-6



Procedure
---------
 1. Exclude CentOS Postgres Packages
    unix> sudo vi /etc/yum.repos.d/CentOS-Base.repo 
       
    a) Add this line to the bottom of the [base] section to exclude postgres packages
         exclude=postgresql*
    
       When done, the [base] section looks like this:
       		[base]
			name=CentOS-$releasever - Base
			mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=os&infra=$infra
			#baseurl=http://mirror.centos.org/centos/$releasever/os/$basearch/
			gpgcheck=1
			gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6
			exclude=postgresql*
       
    b) Add this line to the bottom of the [updates] section to exclude postgres packages
         exclude=postgresql*
      
       When done, the [updates] section looks like this:
       		[updates]
			name=CentOS-$releasever - Updates
			mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=updates&infra=$infra
			#baseurl=http://mirror.centos.org/centos/$releasever/updates/$basearch/
			gpgcheck=1
			gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6
			exclude=postgresql*
			       
        
    
 2. Add Postgres Repositories to yum
    a. Go to the site to find the latest version of postgres available for your CentOS version.   
       1) Open a browser
       2) Go to http://yum.postgresql.org/repopackages.php
          -- Get the url for the rpm for postgres 9.3 for centOS 6 x86_64
             *OR*
             https://download.postgresql.org/pub/repos/yum/9.3/redhat/rhel-6-x86_64/pgdg-centos93-9.3-2.noarch.rpm
             
    b. Download the small rpm
       unix> cd ~
       unix> curl -O https://download.postgresql.org/pub/repos/yum/9.3/redhat/rhel-6-x86_64/pgdg-centos93-9.3-2.noarch.rpm
    
    c. Install the small rpm
       unix> sudo rpm -ivh pgdg-centos93-9.3-2.noarch.rpm
       
       -- This will allow your system to pull the postgres package from the Postgres website.
   
    d. List the packages available from the postgres website
       unix> sudo yum list postgres*

	   You should see the following output
			postgresql-jdbc.noarch                                               9.4.1208-1.rhel6                                       pgdg93  
			postgresql-jdbc-javadoc.noarch                                       9.4.1208-1.rhel6                                       pgdg93  
			postgresql-relay.x86_64                                              1.3-2.2.el6.rf                                         rpmforge
			postgresql93.x86_64                                                  9.3.13-1PGDG.rhel6                                     pgdg93  
			postgresql93-contrib.x86_64                                          9.3.13-1PGDG.rhel6                                     pgdg93  
			postgresql93-debuginfo.x86_64                                        9.3.13-1PGDG.rhel6                                     pgdg93  
			postgresql93-devel.x86_64                                            9.3.13-1PGDG.rhel6                                     pgdg93  
			postgresql93-docs.x86_64                                             9.3.13-1PGDG.rhel6                                     pgdg93  
			postgresql93-jdbc.x86_64                                             9.3.1101-1PGDG.rhel6                                   pgdg93  
			postgresql93-jdbc-debuginfo.x86_64                                   9.3.1101-1PGDG.rhel6                                   pgdg93  
			postgresql93-libs.x86_64                                             9.3.13-1PGDG.rhel6                                     pgdg93  
			postgresql93-odbc.x86_64                                             09.05.0200-1PGDG.rhel6                                 pgdg93  
			postgresql93-odbc-debuginfo.x86_64                                   09.03.0400-1PGDG.rhel6                                 pgdg93  
			postgresql93-plperl.x86_64                                           9.3.13-1PGDG.rhel6                                     pgdg93  
			postgresql93-plpython.x86_64                                         9.3.13-1PGDG.rhel6                                     pgdg93  
			postgresql93-pltcl.x86_64                                            9.3.13-1PGDG.rhel6                                     pgdg93  
			postgresql93-python.x86_64                                           4.2-1PGDG.rhel6                                        pgdg93  
			postgresql93-python-debuginfo.x86_64                                 4.2-1PGDG.rhel6                                        pgdg93  
			postgresql93-server.x86_64                                           9.3.13-1PGDG.rhel6                                     pgdg93  
			postgresql93-tcl.x86_64                                              2.1.1-1.rhel6                                          pgdg93  
			postgresql93-tcl-debuginfo.x86_64                                    2.1.1-1.rhel6                                          pgdg93  
			postgresql93-test.x86_64                                             9.3.13-1PGDG.rhel6                                     pgdg93  
	
	       
 
 3. Install the Postgres 9.3 server
    unix> sudo yum install postgresql93-server
           
 
 4. Initialize the Database Environment
    unix> sudo service postgresql-9.3 initdb
  
  
 5. **OPTIONAL** Setup Postgres to startup on boot
    unix> chkconfig postgresql-9.3 on

 6. Open up Port 5432 (so outside clients can connect to postgres)
    unix> sudo -s
    unix> iptables -I INPUT -p tcp -m tcp --dport 5432 -j ACCEPT
    unix> service iptables save
    unix> service iptables restart
    unix> iptables -S  # to list the current rule
     
       
 7. Start the Postgres database service
    unix> sudo service postgresql-9.3 start



How to Log Into the Postgres Database
-------------------------------------
By default, postgres creates a user and a database called postgres.
unix> sudo su - postgres
unix> psql

postgres-# \q

unix> exit





